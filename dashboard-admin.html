<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Admin - Imunisasi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style/dashboard-admin.css">
  <!-- Tambahkan Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav class="col-md-3 col-lg-2 d-md-block sidebar">
        <h4 class="mb-4">Admin Imunisasi</h4>
        <a onclick="showDashboard(); setPageTitle('Dashboard')">🏠 Dashboard</a>

        <div class="dropdown">
          <a class="dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            📋 Data Imunisasi
          </a>
          <ul class="dropdown-menu dropdown-menu-dark bg-gradient">
            <li><a class="dropdown-item text-white" onclick="loadContent('data-anak.html'); setPageTitle('Data Anak')">👶 Data Anak</a></li>
            <li><a class="dropdown-item text-white" onclick="loadContent('input-perkembangan-anak.html'); setPageTitle('Input Perkembangan Anak')">📝 Input Perkembangan</a></li>
          </ul>
        </div>

        <a onclick="loadContent('jadwal.html'); setPageTitle('Jadwal Imunisasi')">📅 Jadwal Imunisasi</a>
        <a onclick="loadContent('riwayat.html'); setPageTitle('Riwayat Imunisasi')">🕓 Riwayat</a>
        <a onclick="loadContent('laporan.html'); setPageTitle('📈 Laporan Imunisasi Bulanan')">📈 Laporan</a>
        <a onclick="loadContent('pengaturan.html'); setPageTitle('Pengaturan')">⚙️ Pengaturan</a>
        <a href="index.html">🚪 Keluar</a>
      </nav>

      <!-- Content -->
      <main class="col-md-9 ms-sm-auto col-lg-10 content">
        <div id="header-title" class="page-header container-limit">
          <h2 class="animated-title">Dashboard</h2>
        </div>

        <div id="dashboard-content">
          <div class="welcome-card container-limit mt-4">
            <h2>Hai Admin 👋</h2>
            <p>Senang melihatmu lagi! Yuk, cek info terbaru soal imunisasi hari ini.</p>
          </div>

          <div class="card mt-4 shadow-sm container-limit">
            <div class="card-body">
              <h5 class="card-title">📊 Ringkasan Hari Ini</h5>
              <p class="card-text">👶 Bayi yang sudah diimunisasi: <strong>150</strong></p>
              <p class="card-text">🕒 Jadwal imunisasi hari ini: <strong>3</strong></p>
            </div>
          </div>
        </div>

        <div id="dynamic-content" style="display: none;" class="container-limit"></div>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function showDashboard() {
      document.getElementById('dashboard-content').style.display = 'block';
      document.getElementById('dynamic-content').style.display = 'none';
      document.getElementById('header-title').style.display = 'block';
      setPageTitle('Dashboard');
    }

    function loadContent(url) {
      const dashboard = document.getElementById('dashboard-content');
      const container = document.getElementById('dynamic-content');
      dashboard.style.display = 'none';
      fetch(url)
        .then(res => res.text())
        .then(html => {
          container.innerHTML = html;
          container.style.display = 'block';
          renderChartIfAvailable(); // Memanggil render chart jika ada di halaman
        });
    }

    function setPageTitle(title) {
      const header = document.getElementById('header-title');
      header.style.display = 'block';
      header.innerHTML = `<h2 class="animated-title">${title}</h2>`;
    }

    // Fungsi khusus untuk render chart jika <canvas> ditemukan
    function renderChartIfAvailable() {
      const canvas = document.getElementById('imunisasiChart');
      if (canvas) {
        const ctx = canvas.getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
            datasets: [{
              label: 'Jumlah Imunisasi',
              data: [50, 45, 60, 40, 45, 80],
              backgroundColor: '#0d6efd'
            },
            {
              label: 'Keluhan',
              data: [3, 2, 1, 4, 2, 5],
              backgroundColor: '#ffc107'
            }]
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'Jumlah Anak'
                }
              }
            }
          }
        });
      }
    }

    window.onload = showDashboard;
  </script>
</body>

</html>
